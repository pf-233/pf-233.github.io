---
title: linux-rmp学习
tags: linux
layout: post
---

## 引言

学习一下linux的安装软件
里面内容出自<<鸟哥的linux私房菜>>
推荐大家去学习一下


### rpm的优点

* RPM 内含已经编译过的程序与配置文件等数据，可以让使用者免除重新编译的困扰;
* RPM 在被安装之前，会先检查系统的硬盘容量、操作系统版本等，可避免文件被错误安装;
* RPM 文件本身提供软件版本信息、相依属性软件名称、软件用途说明、软件所含文件等信息，便于了解软件; 
* RPM 管理的方式使用数据库记录 RPM 文件的相关参数，便于升级、移除、查询与验证。
### 默认的安装路径
安装与文件系统有关linux一般是如下路径有存放相关的文件

路径	| 存放文件的分类 | 
:---:|:---|
/etc|一些配置文件放置的目录，例如 /etc/crontab
/usr/bin|一些可可执行文件案
/usr/lib|一些程序使用的动态函数库
/usr/share/doc|一些基本的软件使用手册与说明文档
/usr/share/man|一些 man page 文件

### 软件信息路径
***/var/lib/rpm/***

安装完毕后，该软件相关的信息就会被写入 /var/lib/rpm/ 目录下的数据库文件中了

未来如果我们有任何软件升级的需求，版本之间的比 较就是来自于这个数据库， 而如果你想要查询系统已经安装的软件，也是从这里查询的!同时，目前的 RPM 也提供数码签章信 息， 这些数码签章也是在这个目录内记录的呢!

### 安装软件
安装软件是 root 的工作，因此你得要是 root 的身份才能够操作 rpm 这指令的

## 各参数
rpm -ivh package_name 选项与参数:       
-v :察看更细部的安装信息画面           
-h :以安装信息列显示安装进度
#### 安装
-i :install 的意思
#### 更新      
-U:后面接的软件即使没有安装过，则系统将予以直接安装; 若后面接的软件有安装过旧版，则系统自动更新至新版;  
-F:如果后面接的软件并未安装到你的 Linux 系统上，则该软件不会被安装;亦即只有已安装至你 Linux 系统内的软件会 被“升级”!
#### 查询
>* RPM 在查询的时候，其实查询的地方是在 /var/lib/rpm/ 这个目录下的数据库文件
>* 也可以查询未安装的 RPM 文件内的信息喔
>* 查询本机上面的 RPM 软件相关信息时， 不需要加上版本的名称，只要加上 软件名称即可!因为他会由 /var/lib/rpm 这个数据库里面去查询
>* 查询文件的时候就要带上全部了


参数	| 代表意义 | 
:---:|:---|
-q|仅查询，后面接的软件名称是否有安装;  
-qa|列出所有的，已经安装在本机 Linux系统上面的所有软件名称;    
-qi|列出该软件的详细信息 (information)，包含开发商、版本与说明等; 
-ql|列出该软件所有的文件与目录所在完整文件名 (list);   
-qc|列出该软件的所有配置文件 (找出在 /etc/ 下面的文件名而已)  
-qd|列出该软件的所有说明文档 (找出与 man 有关的文件而已) 
-qR|列出与该软件有关的相依软件所含的文件 (Required 的意思)      
-qf|由后面接的文件名称，找出该文件属于哪一个已安装的软件;    
-q --scripts|列出是否含有安装后需要执行的脚本档，可用以 debug 喔! 查询某个 RPM 文件内含有的信息:  
-qp[icdlR]|注意 -qp 后面接的所有参数以上面的说明一致。但用途仅在于找出某个 RPM 文件内的信息，而非已安装的软件信息!注意!

#### 验证
参数	| 代表意义 | 
:---:|:---|
-V|后面加的是软件名称，若该软件所含的文件被更动过，才会列出来;
 -Va|列出目前系统上面所有可能被更动过的文件;
-Vp|后面加的是文件名称，列出该软件内可能被更动过的文件;
-Vf|列出某个文件是否被更动过~

#### 反安装（卸载）
-e
npm -e 软件名
可能会因为被其他软件依赖而不可删除

#### 重建数据库
--rebuilddb
当软件库当信息出现一些问题的时候可以通过这个命令重建库
RPM 数据库 /var/lib/rpm/ 内的文件破损时可以使用

#### 其他的一些参数
参数	| 代表意义 | 
:---:|:---|
--nodeps|使用时机:当发生软件属性相依问题而无法安装，但你执意安装时<br>危险性: 软件会有相依性的原因是因为彼此会使用到对方的机制或功能，如果强制安装而不考虑软件的属性 相依， 则可能会造成该软件的无法正常使用!
-- replacefiles|使用时机: 如果在安装的过程当中出现了“某个文件已经被安装在你的系统上面”的信息，又或许出现版本不合 的讯息 (confilcting files) 时，可以使用这个参数来直接覆盖文件<br>危险性: 覆盖的动作是无法复原的!所以，你必须要很清楚的知道被覆盖的文件是真的可以被覆盖喔!否则 会欲哭无泪!
-- replacepkgs|使用时机: 重新安装某个已经安装过的软件!如果你要安装一堆 RPM 软件文件时，可以使用 rpm -ivh *.rpm ，但若某些软件已经安装过了， 此时系统会出现“某软件已安装”的信息，导致无法继续安装。此时可使用这个 选项来重复安装喔!
--force|使用时机:这个参数其实就是 --replacefiles 与 --replacepkgs 的综合体!
--test|使用时机: 想要测试一下该软件是否可以被安装到使用者的 Linux 环境当中，可找出是否有属性相依的问 题。范例为:<br>rpm -ivh pkgname.i386.rpm --test
--justdb|使用时机: 由于 RPM 数据库破损或者是某些缘故产生错误时，可使用这个选项来更新软件在数据库内的相关 信息。
-- nosignature|使用时机: 想要略过数码签章的检查时，可以使用这个选项。
--prefix 新路径|使用时机: 要将软件安装到其他非正规目录时。举例来说，你想要将某软件安装到 /usr/local 而非正规的 /bin, /etc 等目录， 就可以使用“ --prefix /usr/local ”来处理了。
--noscripts|使用时机:不想让该软件在安装过程中自行执行某些系统指令。<br>说明: RPM 的优点除了可以将文件放置到定位之外，还可以自动执行一些前置作业的指令，例如数据库的初 始化。 如果你不想要让 RPM 帮你自动执行这一类型的指令，就加上他吧!